<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>beGAK.com - Kulüp Detay</title>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../shared/theme.css">
    <link rel="stylesheet" href="kulup_detay_style.css">
    <script src="../shared/theme.js"></script>
    <script>
        // Sayfa yüklenmeden önce tema ayarını al
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>
</head>
<body>
    <!-- Toast Message -->
    <div id="toast" class="toast">
        <i class="fas"></i>
        <span id="toast-message"></span>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="brand">
            <div class="brand-logo">
                <img src="/main/images/begakkom_logo (1).svg" alt="beGAKKOM Logo" class="logo-image">
            </div>
            <a href="../anasayfa/anasayfa_screen.html" class="brand-name">beGAK.com</a>
        </div>
        <div class="nav-links">
            <a href="../anasayfa/anasayfa_screen.html"><i class="fas fa-home"></i> Ana Sayfa</a>
            <a href="../sosyal_etkinlikler/sosyal_etkinlikler_screen.html"><i class="fas fa-calendar-alt"></i> Sosyal Etkinlikler</a>
            <a href="../profil/profil_screen.html"><i class="fas fa-user"></i> Profil</a>
            <a href="../mesajlar/mesajlar_screen.html"><i class="fas fa-envelope"></i> Mesajlar</a>
            <a href="../kulupler/kulupler_screen.html" class="active"><i class="fas fa-users"></i> Kulüpler</a>
            <a href="../ayarlar/ayarlar_screen.html"><i class="fas fa-cog"></i> Ayarlar</a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Club Header -->
        <div class="club-header">
            <div class="club-icon-large">
                <i class="fas fa-code" id="club-icon"></i>
            </div>
            <h1 class="club-title" id="club-title">Yazılım Kulübü</h1>
            <div class="club-category" id="club-category">Teknoloji</div>
            <p class="club-description" id="club-description">
                Web geliştirme, mobil uygulama ve yapay zeka projeleri geliştiren öğrenci kulübü. Düzenli workshoplar ve hackathonlar düzenliyoruz.
            </p>
            
            <div class="club-meta-info">
                <div class="meta-item">
                    <div class="meta-value" id="member-count">76</div>
                    <div class="meta-label">Üye</div>
                </div>
                <div class="meta-item">
                    <div class="meta-value" id="event-count">12</div>
                    <div class="meta-label">Etkinlik</div>
                </div>
                <div class="meta-item">
                    <div class="meta-value" id="year-count">5</div>
                    <div class="meta-label">Yıldır Aktif</div>
                </div>
            </div>
        </div>
        
        <!-- Club Tabs -->
        <div class="club-tabs">
            <button class="tab-button active" onclick="openTab('about')">Hakkında</button>
            <button class="tab-button" onclick="openTab('events')">Etkinlikler</button>
            <button class="tab-button" onclick="openTab('members')">Üyeler</button>
            <button class="tab-button" onclick="openTab('gallery')">Galeri</button>
        </div>
        
        <!-- Tab Contents -->
        <!-- About Tab -->
        <div id="about" class="tab-content active">
            <div class="about-section">
                <div class="club-details">
                    <h2 class="section-title">Kulüp Hakkında</h2>
                    <div class="club-info">
                        <p>
                            Yazılım Kulübü, Fırat Üniversitesi'nin en aktif teknoloji kulüplerinden biridir. 2018 yılında kurulan kulübümüz, öğrencilere yazılım geliştirme, mobil uygulama, web teknolojileri ve yapay zeka alanlarında kendilerini geliştirme imkanı sunmaktadır.
                        </p>
                        <p>
                            Her ay düzenli olarak workshop, seminer ve hackathon etkinlikleri düzenleyen kulübümüz, sektörden uzmanları da üniversitemize davet ederek öğrencilerin güncel teknolojileri yakından takip etmelerini sağlamaktadır.
                        </p>
                    </div>
                    
                    <div class="club-goals">
                        <h3 class="section-title">Kulüp Hedeflerimiz</h3>
                        <ul class="goal-list">
                            <li class="goal-item">Öğrencilerin yazılım alanında teorik ve pratik bilgilerini artırmak</li>
                            <li class="goal-item">Sektörle iş birliği yaparak staj ve iş imkanları sağlamak</li>
                            <li class="goal-item">Öğrencilerin takım çalışması yeteneklerini geliştirmek</li>
                            <li class="goal-item">Yeni teknolojileri yakından takip etmek ve uygulamak</li>
                            <li class="goal-item">Ulusal ve uluslararası yarışmalara katılmak</li>
                        </ul>
                    </div>
                </div>
                
                <div class="contact-info">
                    <h2 class="section-title">İletişim</h2>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>yazilimkulubu@firat.edu.tr</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <span>+90 424 123 45 67</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Mühendislik Fakültesi, 3. Kat, Oda 305</span>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <span>Hafta içi: 09:00 - 17:00</span>
                    </div>
                    
                    <h3 class="section-title" style="margin-top: 2rem;">Sosyal Medya</h3>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Events Tab -->
        <div id="events" class="tab-content">
            <h2 class="section-title">Yaklaşan Etkinlikler</h2>
            <div class="events-list">
                <div class="event-card">
                    <div class="event-date">
                        <div class="event-day">15</div>
                        <div class="event-month">Haz</div>
                    </div>
                    <div class="event-details">
                        <h3 class="event-title">Web Geliştirme Workshop</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Mühendislik Fakültesi, Amfi 2</span>
                        </div>
                        <div class="event-time">
                            <i class="fas fa-clock"></i>
                            <span>14:00 - 17:00</span>
                        </div>
                        <p class="event-description">
                            Modern web uygulamaları geliştirme tekniklerini öğreneceğimiz interaktif bir workshop.
                        </p>
                        <div class="event-action">
                            <button class="attend-btn">
                                <i class="fas fa-check-circle"></i> Katıl
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="event-card">
                    <div class="event-date">
                        <div class="event-day">22</div>
                        <div class="event-month">Haz</div>
                    </div>
                    <div class="event-details">
                        <h3 class="event-title">Yapay Zeka Semineri</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Merkez Konferans Salonu</span>
                        </div>
                        <div class="event-time">
                            <i class="fas fa-clock"></i>
                            <span>13:30 - 16:00</span>
                        </div>
                        <p class="event-description">
                            Yapay zeka ve makine öğrenmesi alanında uzman konuşmacılarla güncel gelişmeleri değerlendireceğiz.
                        </p>
                        <div class="event-action">
                            <button class="attend-btn">
                                <i class="fas fa-check-circle"></i> Katıl
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="event-card">
                    <div class="event-date">
                        <div class="event-day">30</div>
                        <div class="event-month">Haz</div>
                    </div>
                    <div class="event-details">
                        <h3 class="event-title">Hackathon 2023</h3>
                        <div class="event-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Teknoloji Fakültesi</span>
                        </div>
                        <div class="event-time">
                            <i class="fas fa-clock"></i>
                            <span>Tüm Gün</span>
                        </div>
                        <p class="event-description">
                            24 saat sürecek hackathonda takımlar halinde projeler geliştirip, ödüller kazanma şansı yakalayacağız.
                        </p>
                        <div class="event-action">
                            <button class="attend-btn">
                                <i class="fas fa-check-circle"></i> Katıl
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Members Tab -->
        <div id="members" class="tab-content">
            <h2 class="section-title">Kulüp Üyeleri</h2>
            <div class="members-list">
                <div class="member-card">
                    <div class="member-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3 class="member-name">Ahmet Yılmaz</h3>
                    <div class="member-role">Kulüp Başkanı</div>
                    <p class="member-info">
                        Bilgisayar Mühendisliği 4. sınıf öğrencisi. Web geliştirme ve veri bilimi konularında uzmanlaşıyor.
                    </p>
                    <div class="member-contact">
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
                
                <div class="member-card">
                    <div class="member-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3 class="member-name">Zeynep Kaya</h3>
                    <div class="member-role">Başkan Yardımcısı</div>
                    <p class="member-info">
                        Yazılım Mühendisliği 3. sınıf öğrencisi. Mobil uygulama geliştirme konusunda uzmanlaşıyor.
                    </p>
                    <div class="member-contact">
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
                
                <div class="member-card">
                    <div class="member-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3 class="member-name">Mehmet Demir</h3>
                    <div class="member-role">Etkinlik Koordinatörü</div>
                    <p class="member-info">
                        Bilgisayar Mühendisliği 3. sınıf öğrencisi. Yapay zeka ve oyun geliştirme konularında çalışıyor.
                    </p>
                    <div class="member-contact">
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
                
                <div class="member-card">
                    <div class="member-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3 class="member-name">Ayşe Şahin</h3>
                    <div class="member-role">Medya Sorumlusu</div>
                    <p class="member-info">
                        Elektrik Elektronik Mühendisliği 2. sınıf öğrencisi. Web tasarımı ve sosyal medya yönetimi konularında deneyimli.
                    </p>
                    <div class="member-contact">
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                        <a href="#"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Gallery Tab -->
        <div id="gallery" class="tab-content">
            <h2 class="section-title">Etkinlik Galerisi</h2>
            <div class="gallery-grid">
                <div class="gallery-item">
                    <img src="https://picsum.photos/id/180/500/500" alt="Etkinlik" class="gallery-image">
                    <div class="gallery-overlay">
                        <div class="gallery-info">
                            <h3 class="gallery-title">Yapay Zeka Semineri</h3>
                            <div class="gallery-date">12 Mart 2023</div>
                        </div>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <img src="https://picsum.photos/id/160/500/500" alt="Etkinlik" class="gallery-image">
                    <div class="gallery-overlay">
                        <div class="gallery-info">
                            <h3 class="gallery-title">Web Geliştirme Workshop</h3>
                            <div class="gallery-date">25 Şubat 2023</div>
                        </div>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <img src="https://picsum.photos/id/48/500/500" alt="Etkinlik" class="gallery-image">
                    <div class="gallery-overlay">
                        <div class="gallery-info">
                            <h3 class="gallery-title">Mobil Uygulama Geliştirme</h3>
                            <div class="gallery-date">15 Ocak 2023</div>
                        </div>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <img src="https://picsum.photos/id/342/500/500" alt="Etkinlik" class="gallery-image">
                    <div class="gallery-overlay">
                        <div class="gallery-info">
                            <h3 class="gallery-title">Hackathon 2022</h3>
                            <div class="gallery-date">5 Aralık 2022</div>
                        </div>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <img src="https://picsum.photos/id/239/500/500" alt="Etkinlik" class="gallery-image">
                    <div class="gallery-overlay">
                        <div class="gallery-info">
                            <h3 class="gallery-title">Sektör Buluşması</h3>
                            <div class="gallery-date">20 Kasım 2022</div>
                        </div>
                    </div>
                </div>
                
                <div class="gallery-item">
                    <img src="https://picsum.photos/id/142/500/500" alt="Etkinlik" class="gallery-image">
                    <div class="gallery-overlay">
                        <div class="gallery-info">
                            <h3 class="gallery-title">Veri Bilimi Eğitimi</h3>
                            <div class="gallery-date">10 Ekim 2022</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Join Button -->
        <div class="club-join">
            <button class="join-button" id="joinButton">
                <i class="fas fa-sign-in-alt"></i> Kulübe Katıl
            </button>
        </div>
    </div>

    <script>
        // Sayfa yüklendiğinde
        document.addEventListener('DOMContentLoaded', function() {
            // Tema ayarlarını kontrol et ve uygula
            if (typeof loadUserTheme === 'function') {
                loadUserTheme();
                setTimeout(() => applyThemeToAllElements(), 100);
            }
            
            // Tema değişikliklerini dinle
            document.addEventListener('themeChange', function(e) {
                console.log('Kulüp detay sayfasında tema değişikliği algılandı:', e.detail.theme);
                // Tüm sayfa için tema değişikliğini uygula
                document.body.style.transition = 'background-color 0.3s ease, color 0.3s ease';
            });
            
            // URL parametrelerini kontrol et
            const urlParams = new URLSearchParams(window.location.search);
            const clubId = urlParams.get('id');
            
            if (clubId) {
                loadClubDetails(clubId);
            }
            
            // Katıl butonunu ayarla
            const joinButton = document.getElementById('joinButton');
            joinButton.addEventListener('click', function() {
                if (joinButton.classList.contains('leave-button')) {
                    leaveClub();
                } else {
                    joinClub();
                }
            });
        });
        
        // Kulüp detaylarını yükle
        async function loadClubDetails(clubId) {
            try {
                // API isteğini gönder
                const response = await fetch(`/api/clubs/${clubId}`);
                const data = await response.json();
                
                if (data.success && data.club) {
                    const club = data.club;
                    
                    // Kulüp bilgilerini sayfaya yerleştir
                    document.getElementById('club-name').textContent = club.name;
                    document.getElementById('club-description').textContent = club.description || 'Açıklama bulunmamaktadır.';
                    
                    // İkon varsa güncelle
                    const clubIcon = document.querySelector('.club-icon i');
                    if (clubIcon && club.icon) {
                        clubIcon.className = `fas ${club.icon}`;
                    }
                    
                    // Üye sayısını güncelle
                    if (club.members) {
                        document.getElementById('member-count').textContent = club.members.length;
                    }
                    
                    // Kullanıcının kulüp üyeliğini kontrol et
                    checkMembership(club);
                } else {
                    showToast('Kulüp bilgileri yüklenirken bir hata oluştu', 'error');
                }
            } catch (error) {
                console.error('Kulüp detayları yüklenirken hata:', error);
                showToast('Kulüp bilgileri yüklenirken bir hata oluştu: ' + error.message, 'error');
            }
        }
        
        // Üyelik durumunu kontrol et
        function checkMembership(club) {
            const userEmail = localStorage.getItem('userEmail');
            
            if (!userEmail) {
                showToast('Oturum bilgileriniz bulunamadı, lütfen tekrar giriş yapın', 'error');
                window.location.href = '/main/login/login_screen.html';
                return;
            }
            
            // Kullanıcının kulüp üyesi olup olmadığını kontrol et
            const isMember = club.members && club.members.includes(userEmail);
            
            const joinButton = document.getElementById('joinButton');
            if (isMember) {
                joinButton.innerHTML = '<i class="fas fa-sign-out-alt"></i> Kulüpten Ayrıl';
                joinButton.classList.add('leave-button');
            } else {
                joinButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Kulübe Katıl';
                joinButton.classList.remove('leave-button');
            }
            
            // Kulüp adını button'a data özelliği olarak ekle
            joinButton.setAttribute('data-club-name', club.name);
        }
        
        // Kulübe katıl
        async function joinClub() {
            const userEmail = localStorage.getItem('userEmail');
            const joinButton = document.getElementById('joinButton');
            const clubName = joinButton.getAttribute('data-club-name');
            
            if (!userEmail) {
                showToast('Oturum bilgileriniz bulunamadı, lütfen tekrar giriş yapın', 'error');
                window.location.href = '/main/login/login_screen.html';
                return;
            }
            
            if (!clubName) {
                showToast('Kulüp bilgisi bulunamadı', 'error');
                return;
            }
            
            try {
                // API isteği gönder
                const response = await fetch('/join-club', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        clubName: clubName,
                        email: userEmail
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast(data.message || 'Kulübe başarıyla katıldınız!', 'success');
                    
                    // Buton görünümünü güncelle
                    joinButton.innerHTML = '<i class="fas fa-sign-out-alt"></i> Kulüpten Ayrıl';
                    joinButton.classList.add('leave-button');
                    
                    // Üye sayısını güncelle
                    const memberCount = document.getElementById('member-count');
                    memberCount.textContent = parseInt(memberCount.textContent) + 1;
                } else {
                    showToast(data.message || 'Kulübe katılırken bir hata oluştu', 'error');
                }
            } catch (error) {
                console.error('Kulübe katılırken hata:', error);
                showToast('Kulübe katılırken bir hata oluştu: ' + error.message, 'error');
            }
        }
        
        // Kulüpten ayrıl
        async function leaveClub() {
            const userEmail = localStorage.getItem('userEmail');
            const joinButton = document.getElementById('joinButton');
            const clubName = joinButton.getAttribute('data-club-name');
            
            if (!userEmail) {
                showToast('Oturum bilgileriniz bulunamadı, lütfen tekrar giriş yapın', 'error');
                window.location.href = '/main/login/login_screen.html';
                return;
            }
            
            if (!clubName) {
                showToast('Kulüp bilgisi bulunamadı', 'error');
                return;
            }
            
            try {
                // API isteği gönder
                const response = await fetch('/leave-club', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        clubName: clubName,
                        email: userEmail
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showToast(data.message || 'Kulüpten ayrıldınız', 'success');
                    
                    // Buton görünümünü güncelle
                    joinButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Kulübe Katıl';
                    joinButton.classList.remove('leave-button');
                    
                    // Üye sayısını güncelle
                    const memberCount = document.getElementById('member-count');
                    memberCount.textContent = Math.max(0, parseInt(memberCount.textContent) - 1);
                } else {
                    showToast(data.message || 'Kulüpten ayrılırken bir hata oluştu', 'error');
                }
            } catch (error) {
                console.error('Kulüpten ayrılırken hata:', error);
                showToast('Kulüpten ayrılırken bir hata oluştu: ' + error.message, 'error');
            }
        }
        
        // Sekme geçişi
        function openTab(tabName) {
            // Tüm sekme içeriklerini gizle
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // Tüm sekme butonlarını pasif yap
            const tabButtons = document.getElementsByClassName('tab-button');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            
            // Seçilen sekmeyi ve içeriğini aktif yap
            document.getElementById(tabName).classList.add('active');
            
            // İlgili butonu aktif yap
            const buttons = document.querySelectorAll(`.tab-button`);
            for (let i = 0; i < buttons.length; i++) {
                if (buttons[i].getAttribute('onclick') === `openTab('${tabName}')`) {
                    buttons[i].classList.add('active');
                }
            }
        }
        
        // Toast mesajı göster
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const icon = toast.querySelector('i');
            const messageEl = document.getElementById('toast-message');
            
            toast.className = `toast ${type}`;
            icon.className = `fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}`;
            messageEl.textContent = message;
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html> 