<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>beGAK.com - Admin Paneli</title>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../shared/theme.css">
    <link rel="stylesheet" href="admin_style.css">
    <script src="../shared/theme.js"></script>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="brand">
            <div class="brand-logo">
                <img src="/main/images/begakkom_logo (1).svg" alt="beGAKKOM Logo" class="logo-image">
            </div>
            <a href="../anasayfa/anasayfa_screen.html" class="brand-name">beGAK.com</a>
        </div>
        <div class="nav-links">
            <a href="../anasayfa/anasayfa_screen.html"><i class="fas fa-home"></i> Ana Sayfa</a>
            <a href="../sosyal_etkinlikler/sosyal_etkinlikler_screen.html"><i class="fas fa-calendar-alt"></i> Sosyal Etkinlikler</a>
            <a href="../profil/profil_screen.html"><i class="fas fa-user"></i> Profil</a>
            <a href="../mesajlar/mesajlar_screen.html"><i class="fas fa-envelope"></i> Mesajlar</a>
            <a href="../kulupler/kulupler_screen.html"><i class="fas fa-users"></i> Kulüpler</a>
            <a href="../ayarlar/ayarlar_screen.html"><i class="fas fa-cog"></i> Ayarlar</a>
            <a href="../admin/admin_screen.html" class="active"><i class="fas fa-shield-alt"></i> Admin</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <h2>Admin Paneli</h2>
            </div>
            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#clubs" class="nav-item" data-section="clubs">
                    <i class="fas fa-users"></i>
                    <span>Kulüpler</span>
                </a>
                <a href="#events" class="nav-item" data-section="events">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Etkinlikler</span>
                </a>
                <a href="#users" class="nav-item" data-section="users">
                    <i class="fas fa-user-friends"></i>
                    <span>Kullanıcılar</span>
                </a>
                <a href="#settings" class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Ayarlar</span>
                </a>
            </nav>
        </aside>

        <!-- Content Area -->
        <div class="admin-content">
            <!-- Admin Login Form -->
            <div id="adminLogin" class="content-section active">
                <div class="section-header">
                    <h1>Admin Girişi</h1>
                </div>
                <form id="adminLoginForm" class="admin-form">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i>
                        Giriş Yap
                    </button>
                </form>
            </div>

            <!-- Admin Panel Content (giriş yapılınca gösterilecek) -->
            <div id="adminPanel" class="content-section" style="display: none;">
                <!-- Dashboard Section -->
                <section id="dashboard" class="content-section active">
                    <div class="section-header">
                        <h1>Dashboard</h1>
                    </div>
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <i class="fas fa-users"></i>
                            <div class="stat-info">
                                <h3>Toplam Kullanıcı</h3>
                                <p id="totalUsers">0</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-check"></i>
                            <div class="stat-info">
                                <h3>Aktif Etkinlikler</h3>
                                <p id="activeEvents">0</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-user-graduate"></i>
                            <div class="stat-info">
                                <h3>Toplam Kulüp</h3>
                                <p id="totalClubs">0</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Clubs Section -->
                <section id="clubs" class="content-section">
                    <div class="section-header">
                        <h1>Kulüp Yönetimi</h1>
                        <button type="button" class="add-btn" onclick="showAddClubModal()">
                            <i class="fas fa-plus"></i>
                            Yeni Kulüp Ekle
                        </button>
                    </div>
                    <div class="clubs-list" id="clubsList">
                        <!-- Kulüpler dinamik olarak yüklenecek -->
                    </div>
                </section>

                <!-- Events Section -->
                <section id="events" class="content-section">
                    <div class="section-header">
                        <h1>Etkinlik Yönetimi</h1>
                        <button type="button" class="add-btn" onclick="showAddEventModal()">
                            <i class="fas fa-plus"></i>
                            Yeni Etkinlik Ekle
                        </button>
                    </div>
                    <div class="events-list" id="eventsList">
                        <!-- Etkinlikler dinamik olarak yüklenecek -->
                    </div>
                </section>

                <!-- Users Section -->
                <section id="users" class="content-section">
                    <div class="section-header">
                        <h1>Kullanıcı Yönetimi</h1>
                    </div>
                    <div class="users-list" id="usersList">
                        <!-- Kullanıcılar dinamik olarak yüklenecek -->
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings" class="content-section">
                    <div class="section-header">
                        <h1>Sistem Ayarları</h1>
                    </div>
                    <div class="settings-form">
                        <form id="settingsForm">
                            <div class="form-group">
                                <label for="siteName">Site Adı</label>
                                <input type="text" id="siteName" name="siteName" value="beGAK.com">
                            </div>
                            <div class="form-group">
                                <label for="maintenanceMode">Bakım Modu</label>
                                <label class="switch">
                                    <input type="checkbox" id="maintenanceMode" name="maintenanceMode">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label for="maxFileSize">Maksimum Dosya Boyutu (MB)</label>
                                <input type="number" id="maxFileSize" name="maxFileSize" value="5">
                            </div>
                            <button type="submit" class="save-btn">Ayarları Kaydet</button>
                        </form>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Add Club Modal -->
    <div id="addClubModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Yeni Kulüp Ekle</h2>
                <button class="close-btn" onclick="closeModal('addClubModal')">&times;</button>
            </div>
            <form id="addClubForm">
                <div class="form-group">
                    <label for="clubName">Kulüp Adı</label>
                    <input type="text" id="clubName" name="clubName" required>
                </div>
                <div class="form-group">
                    <label for="clubDescription">Açıklama</label>
                    <textarea id="clubDescription" name="clubDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label for="clubCategory">Kategori</label>
                    <select id="clubCategory" name="clubCategory" required>
                        <option value="technology">Teknoloji</option>
                        <option value="art">Sanat</option>
                        <option value="sports">Spor</option>
                        <option value="science">Bilim</option>
                        <option value="social">Sosyal</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="clubIcon">İkon</label>
                    <input type="text" id="clubIcon" name="clubIcon" placeholder="fa-users">
                </div>
                <button type="submit" class="submit-btn">Kulüp Ekle</button>
            </form>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div id="addEventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Yeni Etkinlik Ekle</h2>
                <button class="close-btn" onclick="closeModal('addEventModal')">&times;</button>
            </div>
            <form id="addEventForm">
                <div class="form-group">
                    <label for="eventTitle">Etkinlik Adı</label>
                    <input type="text" id="eventTitle" name="eventTitle" required>
                </div>
                <div class="form-group">
                    <label for="eventDate">Tarih ve Saat</label>
                    <input type="datetime-local" id="eventDate" name="eventDate" required>
                </div>
                <div class="form-group">
                    <label for="eventLocation">Konum</label>
                    <input type="text" id="eventLocation" name="eventLocation" required>
                </div>
                <div class="form-group">
                    <label for="eventDescription">Açıklama</label>
                    <textarea id="eventDescription" name="eventDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label for="eventCategory">Kategori</label>
                    <select id="eventCategory" name="eventCategory" required>
                        <option value="academic">Akademik</option>
                        <option value="cultural">Kültürel</option>
                        <option value="sports">Spor</option>
                        <option value="social">Sosyal</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="maxParticipants">Maksimum Katılımcı</label>
                    <input type="number" id="maxParticipants" name="maxParticipants" min="1" required>
                </div>
                <button type="submit" class="submit-btn">Etkinlik Ekle</button>
            </form>
        </div>
    </div>

    <script src="admin_backend.js"></script>
    <script>
    document.getElementById('adminLoginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        
        try {
            const response = await fetch('/api/admin/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email })
            });
            
            const data = await response.json();
            
            if (data.success) {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                // Admin panelini başlat
                window.adminPanel = new AdminPanel();
            } else {
                alert(data.message || 'Giriş başarısız');
            }
        } catch (error) {
            console.error('Login error:', error);
            alert('Giriş sırasında bir hata oluştu');
        }
    });
    </script>
</body>
</html>